"use strict";var translation={filters:{sourceLabel:"Messages from source:",allSources:"- all sources -"}};!function(){app.filter("displayName",function(){return function(a){var b=a.email?' (<a href="mailto:'+a.email+'">'+a.email+"</a>)":"";return a.fullName?"<strong>"+a.fullName+"</strong>"+b:a.nickName?"<strong>"+a.nickName+"</strong>"+b:a.email?a.email:"Anonim"}})}(),function(){function a(){return function(a){var b="Anonim";return a.nickName?b='<a href="http://github.com/'+a.nickName+'" target="_blank">'+a.nickName+"</a>":a.fullName?b=a.fullName:a.email&&(b=a.email),'<span class="user">'+b+"</span>"}}function b(){return function(a){var b="";return"github.commit"==a.type?b='<a href="'+a.extras.url+'" target="new">'+a.extras.id.substr(0,10)+"</a>":"github.issue_comment_created"==a.type?b='<a href="'+a.extras.url+'" target="new">#'+a.extras.issue_number+"</a>":(a.type.indexOf("github.pull_request")||a.type.indexOf("github.issue"))&&(b='<a href="'+a.extras.url+'" target="new">#'+a.extras.number+"</a>"),b}}function c(){return function(a){var b="";return"github.commit"==a.type?b=a.extras.body:"github.issue_opened"==a.type?b="<strong>"+a.extras.title+"</strong><br/>"+a.extras.body:"github.issue_comment_created"==a.type&&(b=a.extras.body),b}}function d(){return function(a){var b,c="";return a.repository&&(b=a.repository,b.full_name||(b.full_name=b.owner+"/"+b.name),a.branch&&(c+='to <a href="https://github.com/'+b.full_name+"/tree/"+a.branch+'">'+a.branch+"</a> "),c+='at <a href="https://github.com/'+b.full_name+'">'+b.full_name+"</a>"),c}}app.filter("githubUser",a),app.filter("githubAction",b),app.filter("githubExtendedMessage",c),app.filter("githubRepositoryInformation",d)}(),function(){function a(){return function(a){return"https://scrutinizer-ci.com/g/"+a.repository.user+"/"+a.repository.name+"/inspections/"+a.id}}function b(){return function(a){var b=[];return[{count:a.results.added_code_elements,text:"code element{{suffix}} {{verb}} added"},{count:a.results.changed_code_elements,text:"code element{{suffix}} {{verb}} changed"},{count:a.results.removed_code_elements,text:"code element{{suffix}} {{verb}} removed"},{count:a.results.new_issues,text:"new issue{{suffix}} {{verb}} introduced"},{count:a.results.fixed_issues,text:"issue{{suffix}} {{verb}} fixed"},{count:a.results.common_issues,text:"issue{{suffix}} unresolved"}].forEach(function(a){a.count>0&&b.push(c(a.count,a.text))}),b.join(", ")}}function c(a,b){var c="was",d="";return a>1&&(c="were",d="s"),"<strong>"+a+"</strong> "+b.replace("{{suffix}}",d).replace("{{verb}}",c)}function d(){return function(a){var b=a.user+"/"+a.name,c='<a href="https://github.com/'+b+'" target="_blank">'+b+"</a>",d='<a href="https://github.com/'+b+"/tree/"+a.branch+'" target="_blank">'+a.branch+"</a>";return d+" at "+c}}app.filter("scrutinizerUrlToInspection",a),app.filter("scrutinizerSetDescription",b),app.filter("scrutinizerSetRepoInfo",d)}(),function(){app.controller("MainController").directive("momentTimeAgo",["$interval",function(a){function b(b,c,d){function e(){var a=moment(f),b=moment(),d="";d=b.diff(a,"days")<3?a.fromNow():a.format("LLLL"),c.text(d)}var f;b.$watch(d.momentTimeAgo,function(a){f=a,e()}),a(function(){e()},45e3)}return{link:b}}])}(),function(){function a(){return function(a){return"passed"===a||"fixed"===a?"fa-check":"broken"===a||"failed"===a?"fa-remove":"errored"===a?"fa-exclamation":"fa-gears"}}function b(){return function(a){var b="",c="",d="";return a.git_url&&(c='<a href="'+a.git_url+'">{{number}}</a>'),a.type&&(d=a.type.replace("_"," ")),b="push"===a.type?a.git_number?a.git_number.substr(0,10):"":a.git_number?"#"+a.git_number:"",d+" "+c.replace("{{number}}",b)}}function c(){return function(a){var b=a.owner+"/"+a.name;return'<a href="https://github.com/'+b+'" target="_blank">'+b+"</a>"}}app.filter("travisSetStatusIcon",a),app.filter("travisSetDescription",b),app.filter("travisSetRepoInfo",c)}(),function(){app.controller("AppController",["$rootScope",function(a){a._=translation}])}(),function(){app.controller("MainController",["$scope","APIService",function(a,b){function c(){b.getAvailableSources().then(function(b){a.sources=b.data})}function d(){if(!a.stopLoadingMore){var c=angular.copy(a.filters);a.stopLoadingMore=!0,a.showLoadingSpinner=!0,b.getLatestMessages(c,f,e).then(function(b){b.data.forEach(function(b){a.messages.push(b)}),b.data.length>0&&(a.stopLoadingMore=!1),e+=b.data.length,a.showLoadingSpinner=!1})}}var e=0,f=10;a.messages=[],a.filters={source:""},a.setupLatestMessages=d,a.getMoreMessages=d,a.stopLoadingMore=!1,a.showLoadingSpinner=!1,c(),d()}])}(),function(){app.service("AjaxService",["$http",function(a){function b(a){var b="";for(var c in a){var d=a[c];d&&(b+="&"+c+"="+d)}return b}function c(a,c){var d=c?b(c):"";return-1===a.indexOf("?")&&(d=d.replace("&","?")),a+d}function d(a,b){a&&a(b)}function e(b,e,f,g){var b=c(b,e);return console.log("[AjaxService] Sent request GET "+b),a.get(b).success(function(a){console.log("[AjaxService] Response GET "+b,a),d(f,a)}).error(function(a){d(g,a)})}function f(b,c,e,f){return console.log("[AjaxService] Sent request POST "+b,c),a.post(b,c).success(function(a){console.log("[AjaxService] Response POST "+b,a),d(e,a)}).error(function(a){d(f,a)})}var g={get:e,post:f};return g}])}(),function(){app.service("APIService",["AjaxService","config",function(a,b){function c(c,d,e){var f=angular.extend(c,{limit:d,offset:e?e:0,t:(new Date).getTime()}),g=b.api.url+"/latestMessages";return a.get(g,f)}function d(){var c=b.api.url+"/availableSources";return a.get(c,{t:(new Date).getTime()})}var e={getLatestMessages:c,getAvailableSources:d};return e}])}();